<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SWEET MASTER: ULTIMATE CASINO</title>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- GÃ–RSEL TASARIM & EFEKTLER --- */
        :root {
            --bg-dark: #090909;
            --panel-bg: rgba(20, 20, 35, 0.95);
            --primary: #ff0055;
            --accent: #00e5ff;
            --gold: #ffcc00;
            --win-green: #00ff66;
            --grid-bg: rgba(0, 0, 0, 0.5);
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0;
            height: 100vh;
            background: url('https://img.freepik.com/free-vector/gradient-galaxy-background_23-2148991322.jpg') no-repeat center center/cover;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            color: white;
            overflow: hidden;
            display: flex;
        }

        /* --- SIDEBAR MENÃœ --- */
        #sidebar {
            width: 280px;
            background: var(--panel-bg);
            height: 100%;
            position: absolute;
            left: -280px;
            top: 0;
            z-index: 1000;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
            border-right: 2px solid var(--primary);
            display: flex;
            flex-direction: column;
        }
        #sidebar.open { left: 0; }
        
        .sidebar-header { padding: 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .sidebar-header h2 { margin: 0; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 10px var(--accent); }
        
        .menu-items { flex: 1; padding: 20px; overflow-y: auto; }
        .menu-btn {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: 0.3s;
            border: 1px solid transparent;
        }
        .menu-btn:hover { background: var(--primary); transform: translateX(5px); box-shadow: 0 0 15px var(--primary); }
        .menu-btn i { width: 25px; text-align: center; font-size: 1.2rem; }

        /* --- OYUN ALANI (SPLIT SCREEN) --- */
        #game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
            transition: 0.3s;
        }

        /* Ãœst Bar */
        .top-bar {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            background: rgba(0,0,0,0.6);
            z-index: 100;
        }
        .hamburger { font-size: 1.8rem; cursor: pointer; color: white; }
        
        .balance-box {
            background: linear-gradient(90deg, #111, #222);
            padding: 8px 20px;
            border-radius: 50px;
            border: 2px solid var(--gold);
            font-weight: bold;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.3);
        }

        /* Ekranlar */
        .screens-wrapper {
            flex: 1;
            display: flex;
            padding: 10px;
            gap: 10px;
            overflow: hidden;
        }
        
        .player-screen {
            flex: 1;
            background: rgba(0,0,0,0.4);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            position: relative;
        }
        
        .friend-screen {
            flex: 1;
            border: 2px dashed var(--primary);
            opacity: 0.8;
            transform: scale(0.95);
            display: none; /* JS ile aÃ§Ä±lacak */
        }
        .friend-screen.active { display: flex; transform: scale(1); opacity: 1; }

        /* GRID YAPISI (6x5 Bonanza Style) */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 4px;
            width: 100%;
            max-width: 500px;
            aspect-ratio: 6/5;
            background: rgba(0,0,0,0.3);
            padding: 5px;
            border-radius: 10px;
            margin-top: auto;
            margin-bottom: auto;
        }

        .symbol {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem; /* Mobil iÃ§in ayarla */
            background-size: cover;
            border-radius: 8px;
            background-color: rgba(255,255,255,0.05);
            transition: transform 0.2s;
            position: relative;
        }
        
        /* Animasyon ClasslarÄ± */
        .falling { animation: bounceInDown 0.6s; }
        .popping { animation: zoomOut 0.3s forwards; filter: brightness(2); }
        .matched { box-shadow: inset 0 0 20px var(--win-green); border: 2px solid var(--win-green); }
        .shaking { animation: headShake 0.5s infinite; }

        /* KONTROL PANELÄ° */
        .control-panel {
            height: 100px;
            background: var(--panel-bg);
            border-top: 3px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 10px;
            position: relative;
            z-index: 200;
        }

        .bet-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .bet-input-group {
            display: flex;
            align-items: center;
            background: #222;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #444;
        }
        .bet-btn { background: #333; color: white; border: none; padding: 10px 15px; font-size: 1.2rem; cursor: pointer; }
        .bet-display { width: 80px; text-align: center; font-weight: bold; color: var(--gold); }

        .spin-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--primary), #990033);
            border: 4px solid white;
            color: white;
            font-weight: 900;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 0 20px var(--primary);
            transition: 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .spin-button:active { transform: scale(0.9); box-shadow: 0 0 10px var(--primary); }
        .spin-button.disabled { filter: grayscale(1); cursor: not-allowed; }

        /* KAZANÃ‡ POP-UP */
        .win-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 20px black;
            opacity: 0;
            pointer-events: none;
            z-index: 500;
            width: 100%;
            text-align: center;
        }
        .animate-win { animation: backInUp 1s forwards, fadeOutUp 1s 1.5s forwards; opacity: 1; }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .grid-container { gap: 2px; }
            .symbol { font-size: 1.4rem; }
            .screens-wrapper { flex-direction: column; }
            .friend-screen { height: 30%; border-top: 2px dashed var(--primary); border-left: none; }
            #sidebar { width: 100%; left: -100%; }
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <div class="sidebar-header">
            <h2>Sweet Master</h2>
            <small style="color:#888">Version 3.0 Ultra</small>
        </div>
        <div class="menu-items">
            <div class="menu-btn" onclick="toggleSidebar()"><i class="fas fa-times"></i> MenÃ¼yÃ¼ Kapat</div>
            <div class="menu-btn" onclick="joinRoomPrompt()"><i class="fas fa-users"></i> Online Odaya KatÄ±l</div>
            <div class="menu-btn" onclick="createRoomPrompt()"><i class="fas fa-plus-circle"></i> Oda OluÅŸtur (Host)</div>
            <div class="menu-btn" onclick="showHistory()"><i class="fas fa-history"></i> GeÃ§miÅŸ KazanÃ§lar</div>
            <div class="menu-btn" onclick="toggleSound()"><i class="fas fa-volume-up" id="sound-icon"></i> Ses: AÃ§Ä±k</div>
            <div class="menu-btn" onclick="resetGameData()"><i class="fas fa-trash-alt"></i> Verileri SÄ±fÄ±rla</div>
        </div>
        <div style="padding: 20px; text-align: center; font-size: 0.8rem; color: #555;">
            Server ID: <span id="server-id">OFFLINE</span>
        </div>
    </div>

    <div id="game-container">
        <div class="top-bar">
            <i class="fas fa-bars hamburger" onclick="toggleSidebar()"></i>
            <div class="balance-box">
                <i class="fas fa-coins" style="color:var(--gold)"></i>
                <span id="balance-display">5000</span>
            </div>
            <div class="balance-box" style="font-size:0.9rem; border-color:var(--primary)">
                <i class="fas fa-trophy"></i>
                <span id="win-display">0</span>
            </div>
        </div>

        <div class="screens-wrapper">
            <div class="player-screen" id="p1-screen">
                <div style="width:100%; display:flex; justify-content:space-between; padding:0 10px;">
                    <span class="badge bg-primary">SEN</span>
                    <span id="p1-status" style="font-size:0.8rem; color:#aaa">HazÄ±r</span>
                </div>
                <div class="grid-container" id="grid-p1">
                    </div>
                <div class="win-overlay" id="p1-win-text">BIG WIN!</div>
            </div>

            <div class="player-screen friend-screen" id="p2-screen">
                <div style="width:100%; display:flex; justify-content:space-between; padding:0 10px;">
                    <span class="badge" style="background:var(--primary)">RAKÄ°P</span>
                    <span id="p2-name">Bekleniyor...</span>
                </div>
                <div class="grid-container" id="grid-p2">
                    </div>
                <div class="win-overlay" id="p2-win-text">BIG WIN!</div>
            </div>
        </div>

        <div class="control-panel">
            <div class="bet-controls">
                <small style="color:#888; font-weight:bold;">BAHÄ°S</small>
                <div class="bet-input-group">
                    <button class="bet-btn" onclick="changeBet(-50)">-</button>
                    <div class="bet-display" id="bet-amount">100</div>
                    <button class="bet-btn" onclick="changeBet(50)">+</button>
                </div>
            </div>

            <div class="spin-button" id="spin-btn" onclick="startSpinSequence()">
                SPIN
            </div>

            <div class="bet-controls">
                <small style="color:#888; font-weight:bold;">OTO</small>
                <div class="bet-input-group">
                    <button class="bet-btn" onclick="toggleAuto()" id="auto-btn">OFF</button>
                </div>
            </div>
        </div>
    </div>

<script>
    /**
     * SWEET MASTER OYUN MOTORU v3.0
     * Bu motor "Cascading Reels" mantÄ±ÄŸÄ± ile Ã§alÄ±ÅŸÄ±r.
     */

    // --- AYARLAR VE DEÄžÄ°ÅžKENLER ---
    const SYMBOLS = [
        { id: 'heart', icon: 'â¤ï¸', val: 10 },
        { id: 'square', icon: 'ðŸŸ¦', val: 5 },
        { id: 'triangle', icon: 'ðŸ”º', val: 4 },
        { id: 'star', icon: 'â­', val: 20 },   // YÃ¼ksek KazanÃ§
        { id: 'moon', icon: 'ðŸŒ™', val: 8 },
        { id: 'diamond', icon: 'ðŸ’Ž', val: 50 }, // Jackpot
        { id: 'grape', icon: 'ðŸ‡', val: 3 },
        { id: 'banana', icon: 'ðŸŒ', val: 2 },
        { id: 'bomb', icon: 'ðŸ’£', val: 0 }     // Scatter (Bonus Tetikleyici)
    ];

    let gameState = {
        balance: 5000,
        bet: 100,
        isSpinning: false,
        autoSpin: false,
        soundOn: true,
        roomID: null,
        history: []
    };

    // Ses BaÄŸlamÄ± (Web Audio API - Dosya gerektirmez)
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    // --- BAÅžLATMA ---
    window.onload = () => {
        loadData();
        createGrid('grid-p1');
        createGrid('grid-p2'); // Rakip iÃ§in boÅŸ grid
        updateUI();
        
        // Rakip gridini ÅŸeffaf sembollerle doldur
        fillRandom('grid-p2', true);
    };

    // --- SES MOTORU (Synthesizer) ---
    function playSound(type) {
        if (!gameState.soundOn) return;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);

        if (type === 'spin') {
            osc.frequency.setValueAtTime(200, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(600, audioCtx.currentTime + 0.2);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
            osc.start(); osc.stop(audioCtx.currentTime + 0.2);
        } else if (type === 'win') {
            osc.type = 'triangle';
            osc.frequency.setValueAtTime(400, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(800, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.5);
            osc.start(); osc.stop(audioCtx.currentTime + 0.5);
        } else if (type === 'pop') {
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
            osc.start(); osc.stop(audioCtx.currentTime + 0.1);
        }
    }

    // --- GRID Ä°ÅžLEMLERÄ° ---
    function createGrid(elementId) {
        const grid = document.getElementById(elementId);
        grid.innerHTML = '';
        for (let i = 0; i < 30; i++) { // 6x5 = 30 HÃ¼cre
            let cell = document.createElement('div');
            cell.className = 'symbol';
            cell.dataset.index = i;
            grid.appendChild(cell);
        }
    }

    function fillRandom(elementId, isMuted = false) {
        const cells = document.getElementById(elementId).children;
        for (let cell of cells) {
            if (!cell.innerText || cell.classList.contains('popping')) {
                const rnd = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                cell.innerText = rnd.icon;
                cell.dataset.id = rnd.id;
                cell.className = 'symbol falling';
                cell.style.filter = isMuted ? 'grayscale(1) opacity(0.5)' : 'none';
                if(!isMuted) cell.style.animationDelay = (Math.random() * 0.3) + 's';
            }
        }
    }

    // --- OYUN MANTIÄžI (TAKLA SÄ°STEMÄ°) ---
    async function startSpinSequence() {
        if (gameState.isSpinning || gameState.balance < gameState.bet) {
            if (gameState.balance < gameState.bet) Swal.fire("Hata", "Bakiye Yetersiz!", "error");
            return;
        }

        gameState.isSpinning = true;
        gameState.balance -= gameState.bet;
        updateUI();
        playSound('spin');
        
        document.getElementById('spin-btn').classList.add('disabled');
        document.getElementById('p1-status').innerText = "DÃ¶nÃ¼yor...";

        // 1. Grid Temizle ve Yeni Semboller DÃ¼ÅŸÃ¼r
        const p1Grid = document.getElementById('grid-p1');
        Array.from(p1Grid.children).forEach(c => c.innerHTML = '');
        
        // SimÃ¼le edilmiÅŸ gecikme (SÃ¼tun sÃ¼tun dÃ¼ÅŸme hissi)
        for(let i=0; i<6; i++) { // 6 SÃ¼tun
            setTimeout(() => {
                // Sadece o sÃ¼tundaki hÃ¼creleri doldur
                for(let r=0; r<5; r++) {
                    let idx = r*6 + i; 
                    let cell = p1Grid.children[idx];
                    let sym = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                    cell.innerText = sym.icon;
                    cell.dataset.id = sym.id;
                    cell.className = 'symbol falling';
                }
            }, i * 100);
        }

        // EÄŸer ODA varsa Rakip de oynasÄ±n (Bot SimÃ¼lasyonu)
        if (gameState.roomID) {
            simulateOpponent();
        }

        // 2. Patlama KontrolÃ¼ (Cascading)
        setTimeout(() => checkMatchesRecursive(1), 1200);
    }

    async function checkMatchesRecursive(multiplier) {
        const grid = document.getElementById('grid-p1');
        const cells = Array.from(grid.children);
        let counts = {};
        let winCells = [];

        // SayÄ±m Yap
        cells.forEach(c => {
            let id = c.dataset.id;
            if(!id) return;
            counts[id] = (counts[id] || 0) + 1;
        });

        // 8+ EÅŸleÅŸme KontrolÃ¼
        let roundWin = 0;
        let hasMatch = false;

        for (let id in counts) {
            if (counts[id] >= 8) {
                hasMatch = true;
                let symInfo = SYMBOLS.find(s => s.id === id);
                let winVal = gameState.bet * (symInfo.val / 10) * (counts[id] / 5) * multiplier;
                roundWin += winVal;

                // Patlayacak hÃ¼creleri iÅŸaretle
                cells.forEach(c => {
                    if (c.dataset.id === id) {
                        c.classList.add('matched'); // YeÅŸil Ã‡erÃ§eve
                        winCells.push(c);
                    }
                });
            }
        }

        if (hasMatch) {
            // KAZANDIN!
            playSound('win');
            gameState.balance += roundWin;
            showFloatingWin(roundWin);
            updateUI();
            
            // Konfeti
            if(roundWin > gameState.bet * 5) {
                confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                showBigWinText("MUHTEÅžEM!");
            }

            // Patlama Animasyonu (Bekle)
            await new Promise(r => setTimeout(r, 800));

            // HÃ¼creleri Yok Et
            winCells.forEach(c => {
                c.classList.remove('matched');
                c.classList.add('popping');
                playSound('pop');
            });

            await new Promise(r => setTimeout(r, 400));

            // TAKLA ATMA (BoÅŸluklarÄ± Doldur)
            winCells.forEach(c => {
                c.classList.remove('popping');
                let rnd = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                c.innerText = rnd.icon;
                c.dataset.id = rnd.id;
                c.className = 'symbol falling'; // Yeni gelenler dÃ¼ÅŸer
            });

            // Tekrar Kontrol Et (Zincirleme Reaksiyon)
            setTimeout(() => checkMatchesRecursive(multiplier + 1), 600);

        } else {
                        // Tur Bitti
            gameState.isSpinning = false;
            document.getElementById('spin-btn').classList.remove('disabled');
            document.getElementById('p1-status').innerText = "HazÄ±r";
            
            // EÄŸer Otomatik Oyun (Auto) AÃ§Ä±ksa ve Bakiye Varsa Yeni Spin At
            if(gameState.autoSpin && gameState.balance >= gameState.bet) {
                setTimeout(startSpinSequence, 1000);
            }
        }
    }

    // --- RAKÄ°P SÄ°MÃœLASYONU (OFFLINE BOT) ---
    function simulateOpponent() {
        const p2Grid = document.getElementById('grid-p2');
        // Rakip ekranÄ±nda ÅŸekerlerin dÃ¼ÅŸtÃ¼ÄŸÃ¼nÃ¼ gÃ¶ster
        fillRandom('grid-p2'); 
        
        setTimeout(() => {
            // %40 ihtimalle rakip sembol patlatÄ±r (Heyecan iÃ§in)
            if(Math.random() > 0.6) {
                let winAmount = gameState.bet * (Math.floor(Math.random() * 10) + 2);
                let winText = document.getElementById('p2-win-text');
                winText.innerText = "+" + winAmount.toFixed(0);
                winText.classList.add('animate-win');
                
                // Konfeti fÄ±rlat (Rakip kazanÄ±nca da heyecan olsun)
                confetti({ particleCount: 50, spread: 50, origin: { x: 0.8, y: 0.4 } });

                setTimeout(() => winText.classList.remove('animate-win'), 2500);
            }
        }, 1500);
    }

    // --- UI GÃœNCELLEMELERÄ° & ANÄ°MASYONLAR ---
    function updateUI() {
        // Mevcut bakiyeyi al
        let oldVal = parseInt(document.getElementById('balance-display').innerText.replace(/\./g, ''));
        // SayÄ± animasyonu ile yeni bakiyeye geÃ§
        animateValue("balance-display", oldVal, gameState.balance, 500);
        document.getElementById('bet-amount').innerText = gameState.bet;
        saveData();
    }

    function animateValue(id, start, end, duration) {
        if (start === end) return;
        let range = end - start;
        let current = start;
        let increment = end > start ? Math.ceil(range / 25) : Math.floor(range / 25);
        let stepTime = Math.abs(Math.floor(duration / 25));
        let obj = document.getElementById(id);
        
        let timer = setInterval(function() {
            current += increment;
            // SayÄ±larÄ± binlik ayraÃ§la formatla
            obj.innerHTML = current.toLocaleString('tr-TR');
            if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                obj.innerHTML = end.toLocaleString('tr-TR');
                clearInterval(timer);
            }
        }, stepTime);
    }

    function showFloatingWin(amount) {
        const p1 = document.getElementById('p1-screen');
        let el = document.createElement('div');
        el.innerText = "+" + Math.floor(amount).toLocaleString('tr-TR');
        el.style.position = 'absolute';
        el.style.left = '50%';
        el.style.top = '50%';
        el.style.fontSize = '2.5rem';
        el.style.color = 'var(--gold)';
        el.style.textShadow = '0 0 15px #000, 0 0 5px #fff';
        el.style.fontWeight = '900';
        el.style.transition = '1.5s cubic-bezier(0.1, 0.7, 1.0, 0.1)';
        el.style.zIndex = 999;
        el.style.pointerEvents = 'none';
        p1.appendChild(el);
        
        setTimeout(() => {
            el.style.transform = 'translate(-50%, -250px) scale(1.5)';
            el.style.opacity = '0';
        }, 50);
        setTimeout(() => el.remove(), 1500);
    }

    function showBigWinText(text) {
        let el = document.getElementById('p1-win-text');
        el.innerText = text;
        el.classList.add('animate-win');
        setTimeout(() => el.classList.remove('animate-win'), 3000);
    }

    // --- KONTROLLER ---
    function changeBet(amount) {
        if(gameState.isSpinning) return;
        if(gameState.bet + amount >= 50 && gameState.bet + amount <= 10000) {
            gameState.bet += amount;
            updateUI();
        }
    }

    function toggleAuto() {
        gameState.autoSpin = !gameState.autoSpin;
        const btn = document.getElementById('auto-btn');
        btn.innerText = gameState.autoSpin ? "ON" : "OFF";
        btn.style.background = gameState.autoSpin ? "var(--win-green)" : "#333";
        btn.style.color = gameState.autoSpin ? "#000" : "#fff";
        
        if(gameState.autoSpin && !gameState.isSpinning) {
            startSpinSequence();
        }
    }

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('open');
    }
    
    function toggleSound() {
        gameState.soundOn = !gameState.soundOn;
        document.getElementById('sound-icon').className = gameState.soundOn ? "fas fa-volume-up" : "fas fa-volume-mute";
        Swal.fire({
            toast: true,
            position: 'top-end',
            icon: 'info',
            title: gameState.soundOn ? 'Ses AÃ§Ä±ldÄ±' : 'Ses KapatÄ±ldÄ±',
            showConfirmButton: false,
            timer: 1500
        });
    }

    // --- ODA & KAYIT SÄ°STEMÄ° ---
    function joinRoomPrompt() {
        Swal.fire({
            title: 'Odaya KatÄ±l',
            input: 'text',
            inputLabel: 'Oda Ä°smi',
            inputPlaceholder: 'Ã–rn: kankalar123',
            showCancelButton: true
        }).then((result) => {
            if (result.isConfirmed && result.value) {
                gameState.roomID = result.value;
                document.getElementById('p2-screen').classList.add('active'); 
                document.getElementById('p2-name').innerText = "Oyuncu: " + result.value;
                document.getElementById('server-id').innerText = "LIVE: " + result.value;
                Swal.fire("BaÅŸarÄ±lÄ±", result.value + " odasÄ±na baÄŸlandÄ±nÄ±z!", "success");
                toggleSidebar();
            }
        });
    }

    function createRoomPrompt() {
        const room = "ROOM-" + Math.floor(Math.random()*9999);
        gameState.roomID = room;
        Swal.fire({
            title: 'Oda Kuruldu',
            text: 'ArkadaÅŸÄ±na bu kodu ver: ' + room,
            icon: 'success',
            confirmButtonText: 'Kodu Kopyala'
        }).then(() => {
            navigator.clipboard.writeText(room);
            document.getElementById('p2-screen').classList.add('active');
            document.getElementById('p2-name').innerText = "Oda Sahibi: Sen";
            document.getElementById('server-id').innerText = "HOSTING: " + room;
            toggleSidebar();
        });
    }

    function saveData() {
        const data = {
            bal: gameState.balance,
            hist: gameState.history
        };
        localStorage.setItem('sm_data_v3', JSON.stringify(data));
    }

    function loadData() {
        const data = JSON.parse(localStorage.getItem('sm_data_v3'));
        if(data) {
            gameState.balance = data.bal;
            gameState.history = data.hist || [];
        }
    }

    function resetGameData() {
        Swal.fire({
            title: 'Emin misin?',
            text: "TÃ¼m bakiyen ve verilerin sÄ±fÄ±rlanacak!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            confirmButtonText: 'Evet, SÄ±fÄ±rla'
        }).then((result) => {
            if (result.isConfirmed) {
                localStorage.removeItem('sm_data_v3');
                location.reload();
            }
        });
    }

    function showHistory() {
        Swal.fire({
            title: 'Kasa Bilgisi',
            html: `GÃ¼ncel Bakiye: <b>${gameState.balance.toLocaleString()}</b> â‚º<br>Lisans: Sweet Master v3.0 Ultra`,
            icon: 'info'
        });
    }

</script>
</body>
</html>

            
